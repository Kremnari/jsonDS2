(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){n("GAND"),n("GmYv"),e.exports=n("b9nV")},BEPO:function(e){e.exports=JSON.parse('{"a":false,"b":false}')},app:function(e,t,n){"use strict";function i(e){return Object.keys(e).filter((function(e){return-1==e.indexOf("$")}))}n.r(t),n.d(t,"App",(function(){return g}));var a={tables:{test:{name:"test",contents:[],$schema:[{name:"id",type:"number"},{name:"name",type:"string"}]},test2:{name:"test2",contents:[],$schema:[{name:"id",type:"number"},{name:"name",type:"string"},{name:"test",type:"boolean"}]}},types:{Boolean:{name:"Boolean",isPrimitive:!0},String:{name:"String",isPrimitive:!0},Number:{name:"Number",isPrimitive:!0},BigInt:{name:"BigInt",isPrimitive:!0},Array:{name:"Array",isPrimitive:!0},Object:{name:"Object",isPrimitive:!0}}},o=function(e){this.baseJSON=e},r=n("aurelia-dialog"),s=n("ztCj");function l(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){l(o,i,a,r,s,"next",e)}function s(e){l(o,i,a,r,s,"throw",e)}r(void 0)}))}}var u=function(){function e(e){this.loadName=null,this.controller=e,this.idbTarget=new s.a("jsonDS2","projects")}var t=e.prototype;return t.activate=function(){var e=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.c)(this.idbTarget);case 2:this.idbs=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.loadFile=function(){var e=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,t.target.files[0].text();case 3:e.t1=e.sent,this.loadedData=e.t0.parse.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.complete=function(){var e=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadedData){e.next=4;break}this.controller.ok(this.loadedData),e.next=8;break;case 4:if(null==this.loadName){e.next=8;break}return e.next=7,Object(s.b)(this.loadName,this.idbTarget);case 7:this.loadedData=e.sent;case 8:this.controller.ok(this.loadedData);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}();u.inject=[r.DialogController];var d=n("Iab2");function p(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){p(o,i,a,r,s,"next",e)}function s(e){p(o,i,a,r,s,"throw",e)}r(void 0)}))}}var f=function(){function e(e){this.saveAs=null,this.saveName=null,this.controller=e,this.idbTarget=new s.a("jsonDS2","projects")}var t=e.prototype;return t.activate=function(){var e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.c)(this.idbTarget);case 2:this.idbs=e.sent,this.saveData=t;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.done=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.saveAs,e.next="replaceIDB"===e.t0?3:"newIDB"===e.t0?6:"newFile"===e.t0?9:12;break;case 3:return e.next=5,this.asDB();case 5:return e.abrupt("break",12);case 6:return e.next=8,this.asDB();case 8:return e.abrupt("break",12);case 9:return e.next=11,this.saveFile();case 11:return e.abrupt("break",12);case 12:this.controller.ok();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.saveFile=function(){Object(d.saveAs)(new Blob([JSON.stringify(this.saveData)],{type:"application/json"}),this.saveName+".jds2")},t.asDB=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.d)(this.saveName,this.saveData,this.idbTarget);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}();f.inject=[r.DialogController];var b,m=n("aurelia-framework");function v(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}var g=Object(m.b)(r.DialogService)(b=function(){function e(e){var t=this;this.tables=null,this.types=null,this.fileContents=a,this.jDS2=null,this.editor={as:null},window.jds2=this,this.dialogService=e,setTimeout((function(){t.init()}),0)}var t=e.prototype;return t.init=function(){this.tables=i(this.fileContents.tables),this.types=i(this.fileContents.types)},t.loadFile=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,t.target.files[0].text();case 3:e.t1=e.sent,this.fileContents=e.t0.parse.call(e.t0,e.t1),this.init();case 6:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){v(o,i,a,r,s,"next",e)}function s(e){v(o,i,a,r,s,"throw",e)}r(void 0)}))});return function(e){return t.apply(this,arguments)}}(),t.loadProject=function(){var e=this;this.dialogService.open({viewModel:u,model:null,lock:!1}).whenClosed((function(t){t.wasCancelled?console.log("load cancelled"):e.jDS2=new o(t.output)}))},t.saveProject=function(){this.dialogService.open({viewModel:f,model:this.jDS2,lock:!1}).whenClosed((function(e){e.wasCancelled&&console.log("save cancelled")}))},t.addNewTable=function(e){this.fileContents.tables[e]={name:e,contents:[],$schema:[]},this.tables.push(e)},t.addNewContentItem=function(e){var t={},n=this.fileContents.tables[this.editor.table].$schema;Object.values(n).forEach((function(e){t[e.name]=""})),this.fileContents.tables[this.editor.table].contents.push({name:e,props:t})},t.editContentItem=function(e){this.editor.CIEdit=this.editor.list[e]},t.showTableContent=function(e){this.editor.as="list",this.editor.table=e,this.editor.list=this.fileContents.tables[e].contents,this.editor.schema=this.fileContents.tables[e].$schema},t.editTableSchema=function(e){this.editor.table!=e?(this.editor.as="editTable",this.editor.table=e,this.editor.schema=this.fileContents.tables[e].$schema):this.editor={as:null}},t.addNewType=function(e){this.types.push(e)},t.editTypeOf=function(e){this.editor.as="editType"},t.addField=function(e,t){var n={name:e,type:t};this.editor.schema.push(n),this.editor.CIEdit.props[e]="",this.newFieldType=null,this.newFieldName=null},e}())||b},"app.css":function(e,t,n){(t=n("JPst")(!1)).push([e.i,"body > nav {\n  position: fixed\n\n}\ndiv.content {\n  position: absolute;\n  top: 40px;\n  bottom: 2px;\n  left: 2px;\n  right: 2px;\n\n}\n\n.content > section {\n  display: inline-block;\n  position: absolute;\n  border: 2px solid darkslategray;\n  border-radius: 5%;\n  box-sizing: border-box;\n  padding: 5px;\n}\n\n#tablesList {\n  top: 0;\n  left: 0;\n  height: 50%;\n  width: 40%;\n}\n\n#editorArea {\n  top: 0;\n  right: 0;\n  height: 70%;\n  width: 60%;\n}\n#editorArea ul {\n  height: 35%;\n  left: 0;\n  right: 0;\n  width: 40%;\n  position: relative;  \n  columns: 2;\n}\n#editorArea ul li {\n  display: inline;\n}\n#editorArea #CIEditor {\n  position: absolute;\n  height: 60%;\n  bottom: 0;\n}\n\n#typesList {\n  bottom: 0;\n  left: 0;\n  height: 50%;\n  width: 40%;\n}\n",""]),e.exports=t},"app.html":function(e,t,n){e.exports='<template>\n  <require from="app.css"></require>\n  <nav>\n    <button click.delegate="loadProject()">Load...</button>\n    <button click.delegate="saveProject()">Save...</button>\n  </nav>\n  <div class="content">\n    <section id="tablesList">\n      <h4>Table/Object List</h4>\n      <div note="add new static content table">\n        <input type="text" value.bind="newTable"></input>\n        <button click.delegate="addNewTable(newTable)">+</button>\n      </div>\n      <div repeat.for="t of tables">\n        <span click.delegate="showTableContent(t)">${t}</span>\n        <span click.delegate="editTableSchema(t)">&#9998;</span>\n      </div>\n    </section>\n    <section id="editorArea">\n      <section if.bind="editor.as == \'list\'">\n        <div>\n          Add new Name:\n          <input type="text" value.bind="newContentName"></input>\n          <button click.delegate="addNewContentItem(newContentName)">+</button>\n        </div>\n        <ul>\n          <li repeat.for="contentItem of editor.list" click.delegate="editContentItem($index)">\n            ${contentItem.name}\n          </li>\n        </ul>\n        <div id="CIEditor" if.bind="editor.CIEdit">\n          ${editor.CIEdit.name}\n          Add new Field:\n          <select name="types" value.bind="newFieldType">\n            <option repeat.for="type of types" model.bind="type">${type}</option>\n          </select>\n          <input type="text" value.bind="newFieldName">name</input>\n          <button click.delegate="addField(newFieldName, newFieldType)">+</button>\n          <div repeat.for="prop of editor.schema">\n            ${prop.name} - ${prop.type}<input type="text" value.bind="editor.CIEdit.props[prop.name]"></input>\n          </div>\n        </div>\n\n      </section>\n      <section if.bind="editor.as == \'editTable\'">\n        <div repeat.for="value of editor.schema">\n\n        </div>\n      </section>\n      <section if.bind="editor.as == \'editType\'">\n        Edit Type\n      </section>\n    </section>\n    <section id="typesList">\n      <h4>Types List</h4>\n      <div note="add new type">\n        <input type="text" value.bind="newTypeName"></input>\n        <button click.delegate="addNewType(newTypeName)">+</button>\n      </div>\n      <div repeat.for="type of types">\n        <span click.delegate="editTypeOf(type)">${type}</span>\n        <div repeat.for="subT of type.subtypes" if.bind="type.subtypes">\n          <span click.delegate="editTypeOf(subT)">${subT.name}</span>\n        </div>\n      </div>\n    </section>\n    <section id="somethingsomethingdarkside">\n\n    </section>\n  </div>\n</template>\n'},main:function(e,t,n){"use strict";n.d(t,"configure",(function(){return a}));n("ls82");var i=n("BEPO");n("70NS");function a(e){e.use.standardConfiguration().feature("resources/index").plugin("aurelia-dialog"),e.use.developmentLogging(i.a?"debug":"warn"),i.b&&e.use.plugin("aurelia-testing"),e.start().then((function(){return e.setRoot("app")}))}},"resources/dialog/loadProject.html":function(e,t){e.exports='<template>\n  <h4>Select Project to load</h4>\n  <h5>From IDB</h5>\n  <select value.bind="loadName">\n    <option repeat.for="idb of idbs" model.bind="idb">${idb}</option>\n  </select>\n  <h5>From File</h5>\n  <input type="file" accept=".jds2,.json" id="jsonFileSelect" change.delegate="loadFile($event)">\n  <label for="jsonFileSelect">Select a File</label>\n  <button click.trigger="complete()">Done</button>\n</template>\n'},"resources/dialog/saveProject.html":function(e,t){e.exports='<template>\n  <h4>Save to...</h4>\n  <input type="radio" value="replaceIDB" name="saveType" checked.bind="saveAs"><h5>Replace IDB</h5>\n  <select value.bind="saveName">\n    <option repeat.for="idb of idbs" model.bind="idb">${idb}</option>\n  </select>\n  <h5>As...</h5>\n  <input type="text" value.bind="saveName" disabled.bind="saveAs==\'replaceIDB\'"></input>\n  <input type="radio" value="newIDB" name="saveType" checked.bind="saveAs"><label for="newIDB">New IDB</label>\n  <input type="radio" value="newFile" name="saveType" checked.bind="saveAs"><label for="newFile">New File</label><br />\n  <button click.delegate="done()">Commit</button>\n  <button click.trigger="controller.cancel()">Cancel</button>\n</template>\n'},"resources/index":function(e,t,n){"use strict";function i(e){}n.r(t),n.d(t,"configure",(function(){return i}))}},[[0,2,4,3,6,5,7,8]]]);
//# sourceMappingURL=app~f075b844.c62be14b409e6767b46f.bundle.map